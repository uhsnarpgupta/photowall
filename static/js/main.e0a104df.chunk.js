(this.webpackJsonpphotowall=this.webpackJsonpphotowall||[]).push([[0],{38:function(e,t,n){e.exports=n(60)},59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var o={};n.r(o),n.d(o,"startAddingPost",(function(){return y})),n.d(o,"startLoadingPost",(function(){return D})),n.d(o,"startRemovingPost",(function(){return S})),n.d(o,"startAddingComment",(function(){return w})),n.d(o,"startLoadingComments",(function(){return P})),n.d(o,"removePost",(function(){return L})),n.d(o,"addPost",(function(){return A})),n.d(o,"addComment",(function(){return C})),n.d(o,"loadPosts",(function(){return T})),n.d(o,"loadComments",(function(){return k}));var a=n(0),r=n.n(a),c=n(27),s=n.n(c),i=n(12),l=n(13),u=n(16),m=n(15),d=(a.Component,n(17)),p=n.n(d),f=n(14);function h(e){var t=e.post;return r.a.createElement("figure",{className:"figure"},r.a.createElement(f.b,{to:"/single/".concat(t.id)},r.a.createElement("img",{className:"photo",src:t.imageLink,alt:t.description})),r.a.createElement("figcaption",null,r.a.createElement("p",null,t.description)),r.a.createElement("div",{className:"button-container"},r.a.createElement("button",{className:"remove-button",onClick:function(){e.startRemovingPost(e.index,t.id),e.history.push("/")}},"Remove"),r.a.createElement(f.b,{className:"button",to:"/single/".concat(t.id)},r.a.createElement("div",{className:"comment-count"},r.a.createElement("div",{className:"speech-bubble"}),e.comments[t.id]?e.comments[t.id].length:0))))}h.proTypes={post:p.a.object.isRequired,onRemovePhoto:p.a.func.isRequired};var b=h;var v=function(e){return r.a.createElement("div",null,r.a.createElement(f.b,{className:"addIcon",to:"/AddPhoto"}),r.a.createElement("div",{className:"photoGrid"},e.posts.sort((function(e,t){return t.id-e.id})).map((function(t,n){return r.a.createElement(b,Object.assign({key:n,post:t},e,{index:n}))}))))},E=(n(47),function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).handleSubmit=function(t){t.preventDefault();var n=t.target.elements.imageLink.value,o=t.target.elements.description.value,a={id:Number(new Date),description:o,imageLink:n};n&&o&&(e.props.startAddingPost(a),e.props.history.push("/"))},e}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"add-post"},r.a.createElement("div",{className:"form",onSubmit:this.handleSubmit},r.a.createElement("form",{className:"add-form"},r.a.createElement("input",{name:"imageLink",placeholder:"Link"}),r.a.createElement("input",{name:"description",placeholder:"Description"}),r.a.createElement("button",null,"Post"))))}}]),n}(a.Component)),g=n(3),O=n(22),j=n(18),_=n(33);_.initializeApp({apiKey:"AIzaSyDhw-DwLNo2Ed1XfYJbRLJB6o59LXL4LY4",authDomain:"photowall-4b47d.firebaseapp.com",databaseURL:"https://photowall-4b47d.firebaseio.com",projectId:"photowall-4b47d",storageBucket:"photowall-4b47d.appspot.com",messagingSenderId:"140731132897",appId:"1:140731132897:web:7e0acb59f606f44bcf40a0",measurementId:"G-WNMW1ZWRE8"});var N=_.database();function y(e){return function(t){return N.ref("posts").update(Object(j.a)({},e.id,e)).then((function(){t(A(e))})).catch((function(e){console.log(e)}))}}function D(){return function(e){return N.ref("posts").once("value").then((function(t){var n=[];t.forEach((function(e){n.push(e.val())})),e(T(n))})).catch((function(e){console.log(e)}))}}function S(e,t){var n,o=(n={},Object(j.a)(n,"posts/".concat(t),null),Object(j.a)(n,"comments/".concat(t),null),n);return function(t){return N.ref().update(o).then((function(){t(L(e))})).catch((function(e){console.log(e)}))}}function w(e,t){return function(n){return N.ref("comments/".concat(t)).push(e).then((function(){n(C(e,t))})).catch((function(e){console.log(e)}))}}function P(){return function(e){return N.ref("comments").once("value").then((function(t){var n={};t.forEach((function(e){n[e.key]=Object.values(e.val())})),e(k(n))})).catch((function(e){console.log(e)}))}}function L(e){return{type:"REMOVE_POST",index:e}}function A(e){return{type:"ADD_POST",post:e}}function C(e,t){return{type:"ADD_COMMENT",comment:e,postId:t}}function T(e){return{type:"LOAD_POSTS",posts:e}}function k(e){return{type:"LOAD_COMMENTS",comments:e}}var I=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).handleSubmit=function(t){t.preventDefault();var n=t.target.elements.comment.value;e.props.startAddingComment(n,e.props.id),t.target.elements.comment.value=""},e}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"comment"},this.props.comments.map((function(e,t){return r.a.createElement("p",{key:t}," ",e)})),r.a.createElement("form",{className:"comment-form",onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",placeholder:"comments",name:"comment"}),r.a.createElement("input",{type:"submit",hidden:!0})))}}]),n}(a.Component),R=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.match,n=e.posts,o=Number(t.params.id),a=n.find((function(e){return e.id===o})),c=this.props.comments[o]||[],s=this.props.posts.findIndex((function(e){return e.id===o}));return console.log(a),!0===this.props.loading?r.a.createElement("div",{className:"loader"}," ...loading "):a?r.a.createElement("div",{className:"single-photo"},r.a.createElement(b,Object.assign({post:a},this.props,{index:s})),r.a.createElement(I,{startAddingComment:this.props.startAddingComment,comments:c,id:o})):r.a.createElement("h1",null,"...no post found")}}]),n}(a.Component),M=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).state={loading:!0},o}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.startLoadingPost().then((function(){e.setState({loading:!1})})),this.props.startLoadingComments()}},{key:"render",value:function(){var e=this;return console.log(this.props),r.a.createElement("div",null,r.a.createElement("h1",{className:"font-face"},r.a.createElement(f.b,{to:"/"},"Photowall")),r.a.createElement(g.a,{exact:!0,path:"/",render:function(){return r.a.createElement("div",null,r.a.createElement(v,e.props))}}),r.a.createElement(g.a,{path:"/AddPhoto",render:function(t){return r.a.createElement(E,Object.assign({},e.props,{onHistory:t}))}}),r.a.createElement(g.a,{path:"/single/:id",render:function(t){return r.a.createElement(R,Object.assign({loading:e.state.loading},e.props,t))}}))}},{key:"navigate",value:function(){this.setState({screen:"addPhoto"})}}]),n}(a.Component),x=n(8);var X=Object(g.e)(Object(O.b)((function(e,t){return{posts:e.posts,comments:e.comments}}),(function(e){return console.log(o),Object(x.b)({removePost:L,addPost:A,addComment:C,startAddingPost:y,startLoadingPost:D,startRemovingPost:S,startAddingComment:w,startLoadingComments:P},e)}))(M)),V=(n(59),n(25)),U=n(24),J=[];var W,B=Object(x.c)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(console.log("postReducer"),console.log(t.index),t.type){case"REMOVE_POST":return[].concat(Object(V.a)(e.slice(0,t.index)),Object(V.a)(e.slice(t.index+1)));case"ADD_POST":return[].concat(Object(V.a)(e),[t.post]);case"LOAD_POSTS":return t.posts;default:return e}},comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(console.log("commentReducer"),console.log(t.comment),console.log(t.postId),t.type){case"ADD_COMMENT":return e[t.postId]?Object(U.a)(Object(U.a)({},e),{},Object(j.a)({},t.postId,[].concat(Object(V.a)(e[t.postId]),[t.comment]))):Object(U.a)(Object(U.a)({},e),{},Object(j.a)({},t.postId,[t.comment]));case"LOAD_COMMENTS":return t.comments;default:return e}}}),q=n(37),z=(r.a.createElement("h1",null,"Hello World!"),[q.a]),G=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__();W=window.navigator.userAgent.includes("Chrome")&&G?Object(x.e)(B,Object(x.d)(x.a.apply(void 0,z),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())):Object(x.e)(B,Object(x.d)(x.a.apply(void 0,z))),s.a.render(r.a.createElement(O.a,{store:W},r.a.createElement(f.a,null,r.a.createElement(X,null))),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.e0a104df.chunk.js.map